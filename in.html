<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>نرخ ارز دیجیتال</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
    /* کد CSS مشابه کد شما، فقط برای دکمه ناموجود استایل اضافه شد */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
        background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        color: #fff;
        line-height: 1.6;
    }
    .container {
        width: 100%;
        max-width: 700px;
        text-align: center;
    }
    header {
        margin-bottom: 30px;
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }
    h1 {
        font-size: 2rem;
        margin-bottom: 10px;
        background: rgba(255, 255, 255, 0.12);
        padding: 15px 30px;
        border-radius: 50px;
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        user-select: none;
    }
    .subtitle {
        font-size: 1rem;
        opacity: 0.8;
        margin-top: 8px;
        user-select: none;
    }
    .search-container {
        margin-bottom: 20px;
        width: 100%;
    }
    .search-box {
        width: 100%;
        padding: 12px 20px;
        background: rgba(255, 255, 255, 0.12);
        border: none;
        border-radius: 50px;
        color: white;
        font-size: 16px;
        backdrop-filter: blur(8px);
        transition: background 0.3s ease;
    }
    .search-box:focus {
        outline: none;
        background: rgba(255, 255, 255, 0.22);
    }
    .search-box::placeholder {
        color: rgba(255, 255, 255, 0.7);
    }
    #rates-container {
        display: flex;
        flex-direction: column;
        gap: 14px;
        max-height: 70vh;
        overflow-y: auto;
        padding-right: 4px;
    }
    .glass-button {
        background: rgba(255, 255, 255, 0.12);
        border-radius: 20px;
        padding: 14px 22px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: white;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
        backdrop-filter: blur(14px);
        border: 1.5px solid rgba(255, 255, 255, 0.25);
        cursor: pointer;
        transition: background 0.25s ease, box-shadow 0.3s ease;
        user-select: none;
    }
    .glass-button:hover:not(:disabled) {
        background: rgba(255, 255, 255, 0.25);
        box-shadow: 0 12px 48px rgba(0, 0, 0, 0.3);
    }
    .glass-button:disabled {
        cursor: not-allowed;
        background: rgba(255, 0, 0, 0.2);
        box-shadow: none;
        color: rgba(255, 255, 255, 0.5);
    }
    .glass-button .left,
    .glass-button .right {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }
    .glass-button .right {
        align-items: flex-end;
    }
    .currency-name {
        font-weight: 700;
        font-size: 1.1rem;
        margin-bottom: 4px;
    }
    .currency-code {
        font-size: 0.9rem;
        color: rgba(255, 255, 255, 0.65);
    }
    .rate {
        font-weight: 700;
        font-size: 1.2rem;
        color: #00ffe7;
        text-shadow: 0 0 8px rgba(0, 255, 231, 0.7);
        font-family: monospace;
    }
    .controls {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin-top: 25px;
        flex-wrap: wrap;
    }
    .refresh-button {
        padding: 10px 25px;
        background: rgba(255, 255, 255, 0.2);
        border: none;
        border-radius: 50px;
        color: white;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
        backdrop-filter: blur(8px);
        user-select: none;
    }
    .refresh-button:hover:not(:disabled) {
        background: rgba(255, 255, 255, 0.35);
        transform: scale(1.06);
    }
    .refresh-button:disabled {
        cursor: default;
        opacity: 0.6;
    }
    .auto-update {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        background: rgba(255, 255, 255, 0.1);
        padding: 8px 16px;
        border-radius: 50px;
        user-select: none;
    }
    .last-update {
        margin-top: 15px;
        font-size: 14px;
        opacity: 0.7;
        user-select: none;
    }
    .loading {
        margin: 20px auto;
        width: 40px;
        height: 40px;
        border: 5px solid rgba(255, 255, 255, 0.3);
        border-top-color: #00ffe7;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        display: none;
    }
    .loading.active {
        display: block;
    }
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    .live-badge {
        position: fixed;
        top: 15px;
        left: 15px;
        background: rgba(255, 0, 0, 0.6);
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        animation: pulse 1.5s infinite;
        z-index: 100;
        user-select: none;
    }
    @keyframes pulse {
        0% { opacity: 0.6; }
        50% { opacity: 1; }
        100% { opacity: 0.6; }
    }
    footer {
        text-align: center;
        margin-top: 40px;
        opacity: 0.7;
        font-size: 0.9rem;
        user-select: none;
    }
    @media (max-width: 500px) {
        .glass-button {
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
            padding: 12px 18px;
        }
        .glass-button .right {
            align-items: flex-start;
            width: 100%;
        }
        .rate {
            font-size: 1.1rem;
        }
    }
    .error-message {
        background: rgba(255, 0, 0, 0.2);
        padding: 12px;
        border-radius: 12px;
        margin: 15px 0;
        display: none;
        backdrop-filter: blur(5px);
        font-weight: 700;
        user-select: none;
    }
</style>
</head>
<body>
    <div class="live-badge">LIVE</div>

    <div class="container">
        <header>
            <h1><i class="fas fa-coins"></i> نرخ واقعی ارز دیجیتال </h1>
            <p class="subtitle">بروزرسانی لحظه‌ای نرخ ارزهای دیجیتال بر حسب USDT</p>
        </header>

        <div class="search-container">
            <input type="text" class="search-box" id="search-input" placeholder="جستجوی ارز دیجیتال..." />
        </div>

        <div class="error-message" id="error-message">
            خطا در دریافت نرخ‌های ارز. لطفاً دوباره تلاش کنید.
        </div>

        <div id="rates-container">
            <!-- دکمه‌های شیشه‌ای هر ارز دیجیتال در اینجا ساخته می‌شوند -->
        </div>

        <div class="loading" id="loading-spinner"></div>

        <div class="controls">
            <button class="refresh-button" id="refresh-button">
                <i class="fas fa-sync-alt"></i>
                بروزرسانی نرخ‌ها
            </button>

            <div class="auto-update">
                <input type="checkbox" id="auto-update" checked />
                <label for="auto-update">بروزرسانی خودکار هر 5 دقیقه</label>
            </div>
        </div>

        <div class="last-update" id="last-update">آخرین بروزرسانی: در حال بارگذاری...</div>

        <footer>
            <p>@ARZKEYAHE</p>
        </footer>
    </div>

<script>
    // حذف موارد تکراری و اصلاح نام‌ها در آرایه
    const currencies = [
   {code: 'BTC', name: 'بیت‌کوین'},  
        {code: 'ETH', name: 'اتریوم'},  
        {code: 'BNB', name: 'بایننس کوین'},  
        {code: 'ADA', name: 'کاردانو'},  
        {code: 'XRP', name: 'ریپل'},  
        {code: 'SOL', name: 'سولانا'},  
        {code: 'DOGE', name: 'دوج‌کوین'},  
        {code: 'DOT', name: 'پولکادات'},  
        {code: 'MATIC', name: 'پلی‌گان'},  
        {code: 'LTC', name: 'لایت‌کوین'},  
        {code: 'AVAX', name: 'آوالانچ'},  
        {code: 'SHIB', name: 'شیبا اینو'},  
        {code: 'LINK', name: 'چین‌لینک'},  
        {code: 'ATOM', name: 'کازماس'},  
        {code: 'FTT', name: 'FTX Token'},  
        {code: 'XLM', name: 'استلار'},  
        {code: 'ALGO', name: 'آلگوراند'},  
        {code: 'TRX', name: 'ترون'},  
        {code: 'NEAR', name: 'نیر پروتکل'},  
        {code: 'BCH', name: 'بیت‌کوین کش'},  
        {code: 'VET', name: 'ونچین'},  
        {code: 'XMR', name: 'مونرو'},  
        {code: 'SAND', name: 'دسند'},  
        {code: 'EGLD', name: 'الگردی'},  
        {code: 'CHZ', name: 'چیلیز'},  
        {code: 'MANA', name: 'دیسنترالند'},  
        {code: 'CAKE', name: 'پنکیک سواپ'},  
        {code: 'AXS', name: 'اکسی اینفینیتی'},  
        {code: 'FTM', name: 'فانتوم'},  
        {code: 'THETA', name: 'تتا'},  
        {code: 'AAVE', name: 'آوِی'},  
        {code: 'KSM', name: 'کوساما'},  
        {code: 'RUNE', name: 'تورن'},  
        {code: 'ZIL', name: 'زیلیکا'},  
        {code: 'HNT', name: 'هلیوم'},  
        {code: 'GRT', name: 'The Graph'},  
        {code: 'STX', name: 'استکس'},  
        {code: 'ENJ', name: 'انجین'},  
        {code: 'DASH', name: 'داش'},  
        {code: 'COMP', name: 'کامپوند'},  
        {code: 'KAVA', name: 'کاوا'},  
        {code: 'CRV', name: 'کرایو'},  
        {code: 'SNX', name: 'سینتتیکس'},  
        {code: 'BAT', name: 'بت'},  
        {code: 'MKR', name: 'میکر'},  
        {code: 'YFI', name: 'Yearn.Finance'},  
        {code: 'DCR', name: 'دکریپتو'},  
        {code: 'ZRX', name: '0x'},  
        {code: 'WAVES', name: 'ویوز'},  
        {code: 'OMG', name: 'OMG Network'},  
        {code: 'QTUM', name: 'کوانتوم'},  
        {code: 'LRC', name: 'Loopring'},  
        {code: 'REN', name: 'رن'},  
        {code: '1INCH', name: 'وان اینچ'},  
        {code: 'BTT', name: 'بیت‌تورنت'},  
        {code: 'ANKR', name: 'انکر'},  
        {code: 'CELO', name: 'سیلو'},  
        {code: 'NKN', name: 'NKN'},  
        {code: 'ZEC', name: 'زی‌کش'},  
        {code: 'ICX', name: 'ICON'},  
        {code: 'ONT', name: 'انتولوژی'},  
        {code: 'LUNA', name: 'لونا'},  
        {code: 'FTT', name: 'FTX Token'},  
        {code: 'HEDG', name: 'HedgeTrade'},  
        {code: 'CVC', name: 'Civic'},  
        {code: 'NANO', name: 'نانو'},  
        {code: 'OCEAN', name: 'Ocean Protocol'},  
        {code: 'AR', name: 'Arweave'},  
        {code: 'KNC', name: 'Kyber Network'},  
        {code: 'GNO', name: 'Gnosis'},  
        {code: 'SUSHI', name: 'SushiSwap'},  
        {code: 'BAL', name: 'Balancer'},  
        {code: 'SRM', name: 'Serum'},  
        {code: 'CEL', name: 'Celsius'},  
        {code: 'LPT', name: 'Livepeer'},  
        {code: 'WAXP', name: 'WAX'},  
        {code: 'BAND', name: 'Band Protocol'},  
        {code: 'MATIC', name: 'Polygon'},  
        {code: 'GALA', name: 'Gala'},  
        {code: 'HARMONY', name: 'Harmony'},  
        {code: 'ENJ', name: 'Enjin Coin'},  
        {code: 'RAY', name: 'Raydium'},  
        {code: 'XEM', name: 'NEM'},  
        {code: 'DGB', name: 'Digibyte'},  
        {code: 'DODO', name: 'DODO'},  
        {code: 'CAKE', name: 'PancakeSwap'},  
        {code: 'SXP', name: 'Swipe'},  
        {code: 'REEF', name: 'Reef'},  
        {code: 'IOTA', name: 'IOTA'},  
        {code: 'TWT', name: 'Trust Wallet Token'},  
        {code: 'FTM', name: 'Fantom'},  
        {code: 'ALICE', name: 'My Neighbor Alice'},  
        {code: 'LUNA2', name: 'Terra 2.0'},  
        {code: 'XDC', name: 'XDC Network'},  
        {code: 'RSR', name: 'Reserve Rights'},  
        {code: 'SAND', name: 'The Sandbox'},  
        {code: 'MKR', name: 'Maker'},  
        {code: 'UMA', name: 'UMA'},  
        {code: 'OXT', name: 'Orchid'},  
        {code: 'STORJ', name: 'Storj'},  
        {code: 'ONE', name: 'Harmony One'},  
        {code: 'ARPA', name: 'ARPA Chain'},  
        {code: 'COTI', name: 'COTI'},  
        {code: 'NEXO', name: 'Nexo'},  
        {code: 'ANKR', name: 'Ankr'},  
        {code: 'BTS', name: 'BitShares'},  
        {code: 'CHZ', name: 'Chiliz'}  
    ];

    const ratesContainer = document.getElementById('rates-container');
    const searchInput = document.getElementById('search-input');
    const refreshButton = document.getElementById('refresh-button');
    const autoUpdateCheckbox = document.getElementById('auto-update');
    const lastUpdate = document.getElementById('last-update');
    const loadingSpinner = document.getElementById('loading-spinner');
    const errorMessage = document.getElementById('error-message');

    let currencyRates = {};
    let autoUpdateInterval;

    // تابع دریافت قیمت‌ها از API بایننس
    async function fetchRates() {
        try {
            errorMessage.style.display = 'none';
            loadingSpinner.classList.add('active');
            refreshButton.disabled = true;

            // دریافت داده از API بایننس برای همه جفت‌ها
            const response = await fetch('https://api.binance.com/api/v3/ticker/price');
            if (!response.ok) throw new Error('خطا در دریافت داده‌ها');

            const data = await response.json();

            // استخراج نرخ‌های USDT
            currencyRates = {};
            currencies.forEach(currency => {
                // جستجوی جفت ارز مربوطه
                const pair = data.find(item => item.symbol === currency.code + 'USDT');
                if (pair) {
                    currencyRates[currency.code] = parseFloat(pair.price);
                } else {
                    currencyRates[currency.code] = null;
                }
            });

            lastUpdate.textContent = `آخرین بروزرسانی: ${new Date().toLocaleTimeString('fa-IR')}`;
            renderRates();
        } catch (error) {
            errorMessage.style.display = 'block';
            console.error(error);
        } finally {
            loadingSpinner.classList.remove('active');
            refreshButton.disabled = false;
        }
    }

    // تابع ساخت دکمه‌های شیشه‌ای و نمایش نرخ‌ها
    function renderRates() {
        ratesContainer.innerHTML = '';

        const searchTerm = searchInput.value.trim().toLowerCase();

        currencies.forEach(currency => {
            // فیلتر بر اساس جستجو روی نام یا کد
            if (
                currency.name.includes(searchTerm) ||
                currency.code.toLowerCase().includes(searchTerm)
            ) {
                const rate = currencyRates[currency.code];

                const button = document.createElement('button');
                button.className = 'glass-button';
                button.disabled = (rate === null);

                button.innerHTML = `
                    <div class="left">
                        <span class="currency-name">${currency.name}</span>
                        <span class="currency-code">${currency.code}</span>
                    </div>
                    <div class="right">
                        <span class="rate">${rate !== null ? rate.toFixed(6) : 'ناموجود'}</span>
                    </div>
                `;

                ratesContainer.appendChild(button);
            }
        });

        if (ratesContainer.children.length === 0) {
            ratesContainer.innerHTML = '<p>موردی یافت نشد.</p>';
        }
    }

    // رویداد جستجو
    searchInput.addEventListener('input', () => {
        renderRates();
    });

    // دکمه بروزرسانی دستی
    refreshButton.addEventListener('click', () => {
        fetchRates();
    });

    // فعال یا غیرفعال کردن بروزرسانی خودکار
    autoUpdateCheckbox.addEventListener('change', () => {
        if (autoUpdateCheckbox.checked) {
            startAutoUpdate();
        } else {
            stopAutoUpdate();
        }
    });

    // شروع بروزرسانی خودکار هر 5 دقیقه
    function startAutoUpdate() {
        autoUpdateInterval = setInterval(fetchRates, 5 * 60 * 1000);
    }

    // توقف بروزرسانی خودکار
    function stopAutoUpdate() {
        clearInterval(autoUpdateInterval);
    }

    // بارگذاری اولیه
    fetchRates();
    startAutoUpdate();
</script>
</body>
</html>
